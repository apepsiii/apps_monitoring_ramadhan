{{define "content"}}
<div class="min-h-screen pb-20">
    <header class="islamic-pattern text-white safe-top sticky top-0 z-10">
        <div class="px-4 py-4">
            <div class="flex items-center space-x-3">
                <a href="/admin/dashboard" class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </a>
                <div>
                    <h1 class="text-lg font-bold">Laporan</h1>
                    <p class="text-white/70 text-xs">Admin Panel</p>
                </div>
            </div>
        </div>
    </header>

    <main class="px-4 py-4 space-y-4 fade-in">
        <div class="bg-white rounded-2xl card-shadow p-4">
            <h3 class="font-semibold text-gray-800 mb-4 flex items-center">
                <span class="w-8 h-8 rounded-lg gradient-primary flex items-center justify-center mr-2">
                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/>
                    </svg>
                </span>
                Filter Laporan
            </h3>
            <form action="/admin/reports/generate" method="GET" class="space-y-4">
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Dari Tanggal</label>
                        <input type="date" name="start_date" value="{{.StartDate}}" 
                            class="w-full px-4 py-3 bg-warm-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/30">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Sampai Tanggal</label>
                        <input type="date" name="end_date" value="{{.EndDate}}" 
                            class="w-full px-4 py-3 bg-warm-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/30">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Laporan</label>
                    <select name="type" class="w-full px-4 py-3 bg-warm-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <option value="daily" {{if eq .Type "daily"}}selected{{end}}>Harian</option>
                        <option value="weekly" {{if eq .Type "weekly"}}selected{{end}}>Mingguan</option>
                        <option value="monthly" {{if eq .Type "monthly"}}selected{{end}}>Bulanan</option>
                    </select>
                </div>
                
                <button type="submit" class="w-full py-3 gradient-primary text-white rounded-xl font-medium">
                    Generate Laporan
                </button>
            </form>
        </div>

        {{if .Data}}
        <div class="bg-white rounded-2xl card-shadow p-4">
            <h3 class="font-semibold text-gray-800 mb-4">Hasil Laporan</h3>
            
            {{if .Data.prayer}}
            <div class="mb-6">
                <h4 class="text-sm font-medium text-gray-600 mb-3 flex items-center">
                    <span class="w-6 h-6 rounded-lg bg-primary/10 flex items-center justify-center mr-2">
                        <svg class="w-3 h-3 text-primary" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </span>
                    Statistik Shalat
                </h4>
                <div class="bg-primary/5 rounded-xl p-4">
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <span class="block text-2xl font-bold text-primary">{{.Data.prayer.total_users}}</span>
                            <span class="text-xs text-gray-600">Siswa Input</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-primary">{{.Data.prayer.subuh}}</span>
                            <span class="text-xs text-gray-600">Subuh</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-primary">{{.Data.prayer.dzuhur}}</span>
                            <span class="text-xs text-gray-600">Dzuhur</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-primary">{{.Data.prayer.ashar}}</span>
                            <span class="text-xs text-gray-600">Ashar</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-primary">{{.Data.prayer.maghrib}}</span>
                            <span class="text-xs text-gray-600">Maghrib</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-primary">{{.Data.prayer.isya}}</span>
                            <span class="text-xs text-gray-600">Isya</span>
                        </div>
                    </div>
                </div>
            </div>
            {{end}}

            {{if .Data.fasting}}
            <div class="mb-6">
                <h4 class="text-sm font-medium text-gray-600 mb-3 flex items-center">
                    <span class="w-6 h-6 rounded-lg bg-accent/10 flex items-center justify-center mr-2">
                        <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>
                        </svg>
                    </span>
                    Statistik Puasa
                </h4>
                <div class="bg-accent/5 rounded-xl p-4">
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div>
                            <span class="block text-2xl font-bold text-accent">{{.Data.fasting.total_users}}</span>
                            <span class="text-xs text-gray-600">Total Siswa</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-accent">{{.Data.fasting.fasting}}</span>
                            <span class="text-xs text-gray-600">Berpuasa</span>
                        </div>
                    </div>
                </div>
            </div>
            {{end}}

            {{if .Data.quran}}
            <div class="mb-6">
                <h4 class="text-sm font-medium text-gray-600 mb-3 flex items-center">
                    <span class="w-6 h-6 rounded-lg bg-blue-100 flex items-center justify-center mr-2">
                        <svg class="w-3 h-3 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
                        </svg>
                    </span>
                    Statistik Tilawah
                </h4>
                <div class="bg-blue-50 rounded-xl p-4">
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div>
                            <span class="block text-2xl font-bold text-blue-600">{{.Data.quran.total_users}}</span>
                            <span class="text-xs text-gray-600">Siswa Baca</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-blue-600">{{.Data.quran.total_readings}}</span>
                            <span class="text-xs text-gray-600">Total Bacaan</span>
                        </div>
                    </div>
                </div>
            </div>
            {{end}}

            {{if .Data.amaliah}}
            <div class="mb-6">
                <h4 class="text-sm font-medium text-gray-600 mb-3 flex items-center">
                    <span class="w-6 h-6 rounded-lg bg-purple-100 flex items-center justify-center mr-2">
                        <svg class="w-3 h-3 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg>
                    </span>
                    Statistik Amaliah
                </h4>
                <div class="bg-purple-50 rounded-xl p-4">
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <span class="block text-2xl font-bold text-purple-600">{{.Data.amaliah.total_users}}</span>
                            <span class="text-xs text-gray-600">Siswa Aktif</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-purple-600">{{.Data.amaliah.total_amaliah}}</span>
                            <span class="text-xs text-gray-600">Total Amaliah</span>
                        </div>
                        <div>
                            <span class="block text-2xl font-bold text-purple-600">{{.Data.amaliah.total_points}}</span>
                            <span class="text-xs text-gray-600">Total Poin</span>
                        </div>
                    </div>
                </div>
            </div>
            {{end}}

            <div class="flex gap-3 pt-4 border-t border-gray-100">
                <a href="/admin/reports/download?type={{.Type}}&date={{.StartDate}}" class="flex-1 py-3 px-4 bg-green-100 text-green-700 rounded-xl font-medium text-sm hover:bg-green-200 transition-colors text-center flex items-center justify-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                    Download Excel
                </a>
            </div>
        </div>
        {{else}}
        <div class="bg-white rounded-2xl card-shadow p-8 text-center">
            <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-warm-100 flex items-center justify-center">
                <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
            </div>
            <p class="text-gray-500">Pilih filter dan generate laporan untuk melihat data</p>
        </div>
        {{end}}
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 safe-bottom z-20">
        <div class="max-w-md mx-auto flex justify-around py-2">
            <a href="/admin/dashboard" class="flex flex-col items-center text-gray-400 hover:text-primary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span class="text-xs mt-1">Dashboard</span>
            </a>
            <a href="/admin/users" class="flex flex-col items-center text-gray-400 hover:text-primary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                </svg>
                <span class="text-xs mt-1">Siswa</span>
            </a>
            <a href="/admin/reports" class="flex flex-col items-center text-primary">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                <span class="text-xs mt-1 font-semibold">Laporan</span>
            </a>
            <a href="/logout" class="flex flex-col items-center text-gray-400 hover:text-red-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
                <span class="text-xs mt-1">Keluar</span>
            </a>
        </div>
    </nav>
</div>
{{end}}
